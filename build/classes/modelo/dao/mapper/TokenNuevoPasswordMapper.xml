<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
  'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
  
<mapper namespace='modelo.dao.mapper.TokenNuevoPasswordMapper'>

	<select id='obtenerTokenDesdeEmail' parameterType='String' resultType='TokenNuevoPassword'>
		SELECT PETICION_NUEVO_PASSWD.id as id, usuario_id as idUsuario, fecha_hora as fechaHora
  		  FROM PETICION_NUEVO_PASSWD, USUARIO
 		 WHERE usuario_id = USUARIO.id
		   AND email = #{email};
	</select>

	<select id='insertarToken' parameterType='TokenNuevoPassword'>
		INSERT INTO peticion_nuevo_passwd
		VALUES (#{id}, #{idUsuario}, #{fechaHora});
	</select>

</mapper>